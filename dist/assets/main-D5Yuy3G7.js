import{c as j,r as n,d as ge,l as re,j as e,a as Ge,f as it,b as ct,i as m,S as Le,G as he,C as z,A as dt,e as mt,R as xt}from"./index-BpsowiEp.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=j("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=j("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=j("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=j("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=j("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=j("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=j("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=j("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=j("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=j("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=j("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=j("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=j("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function gt(){const[c,o]=n.useState([]),l=n.useRef(0),d=n.useRef([]),b=n.useRef(!1),[p,y]=n.useState(ge);n.useEffect(()=>{(()=>{const u=localStorage.getItem("raritySettings");if(u)try{y(JSON.parse(u))}catch(g){console.error("Failed to load rarity settings:",g)}})();const x=u=>{y(u.detail)};return window.addEventListener("rarity-settings-updated",x),()=>{window.removeEventListener("rarity-settings-updated",x)}},[]),n.useEffect(()=>{const i=re("achievement-unlocked",x=>{console.log("ðŸ† Achievement unlocked event received:",x.payload),d.current.push(x.payload),r()});return()=>{i.then(x=>x())}},[]);const r=()=>{if(b.current||d.current.length===0)return;b.current=!0;const i=d.current.shift(),x={...i,id:l.current++,visible:!1};if(p.enabled&&i.global_unlock_percentage!==void 0){const u=Ge(i.global_unlock_percentage),g=p[u].soundPath;if(g)try{const f=ct(g);console.log("Playing custom sound for",u,":",f),console.log("Original path:",g);const C=new Audio(f);C.volume=1,C.play().catch(R=>{console.error("Failed to play custom sound:",R),console.error("Asset URL:",f)})}catch(f){console.error("Failed to create audio element:",f)}}else m("play_windows_notification_sound").catch(u=>{console.error("Failed to play Windows notification sound:",u)});o(u=>[...u,x]),setTimeout(()=>{o(u=>u.map(g=>g.id===x.id?{...g,visible:!0}:g))},50),setTimeout(()=>{o(u=>u.map(g=>g.id===x.id?{...g,visible:!1}:g)),setTimeout(()=>{o(u=>u.filter(g=>g.id!==x.id)),b.current=!1,d.current.length>0&&setTimeout(()=>r(),500)},300)},6e3)};return e.jsx("div",{className:"achievement-toast-container",children:c.map(i=>e.jsx(ft,{data:i,raritySettings:p},i.id))})}function ft({data:c,raritySettings:o}){const l=Ge(c.global_unlock_percentage),d=o[l],b=o.enabled,p=b?d.borderColor:"#3B82F6",y=b?d.backgroundColor:"#1E3A8A",r=b?d.backgroundOpacity/100:.9,i=b?d.titleColor:"#DBEAFE",x=b?d.descriptionColor:"#BFDBFE",u=b?d.scaling/100:1,g=b?d.position:"top-right",f=b&&d.glowEffect,C=b?d.glowColor:p,R=b?d.icon:"ðŸ†",L={"top-left":"top-8 left-8","top-right":"top-8 right-8","bottom-left":"bottom-8 left-8","bottom-right":"bottom-8 right-8",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},M=L[g]||L["top-right"],Q={borderColor:p,backgroundColor:`${y}${Math.round(r*255).toString(16).padStart(2,"0")}`,boxShadow:f?`0 0 30px ${C}, 0 0 60px ${C}40, 0 4px 16px rgba(0, 0, 0, 0.5)`:"0 4px 16px rgba(0, 0, 0, 0.5)"},Y={transform:`scale(${u})`},G={background:`radial-gradient(circle at 50% 50%, ${C}40 0%, transparent 70%)`};return e.jsx("div",{className:`fixed ${M}`,style:Y,children:e.jsxs("div",{className:`achievement-toast ${c.visible?"visible":""}`,style:Q,children:[f&&e.jsx("div",{className:"achievement-toast-glow",style:G}),e.jsxs("div",{className:"achievement-toast-header",children:[e.jsx("span",{className:"text-2xl mr-2",children:R}),e.jsxs("span",{className:"achievement-toast-title",style:{color:i},children:["ACHIEVEMENT UNLOCKED",c.global_unlock_percentage!==void 0&&e.jsxs("span",{className:"ml-2 text-sm opacity-75",children:["(",it(c.global_unlock_percentage),")"]})]}),b&&e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded text-xs font-bold",style:{backgroundColor:`${p}30`,color:p,borderColor:p,border:"1px solid"},children:l})]}),e.jsxs("div",{className:"achievement-toast-content",children:[c.icon_url&&e.jsx("div",{className:"achievement-toast-icon",style:{borderColor:p},children:e.jsx("img",{src:c.icon_url,alt:c.display_name})}),e.jsxs("div",{className:"achievement-toast-details",children:[e.jsx("div",{className:"achievement-toast-name",style:{color:i},children:c.display_name}),e.jsx("div",{className:"achievement-toast-description",style:{color:x},children:c.description}),e.jsx("div",{className:"achievement-toast-game",style:{color:x,opacity:.8},children:c.game_name})]})]}),e.jsx("div",{className:"achievement-toast-progress-bar",style:{backgroundColor:`${p}30`},children:e.jsx("div",{className:"achievement-toast-progress-fill",style:{backgroundColor:p}})})]})})}const vt=["top-left","top-right","bottom-left","bottom-right","center"],yt=[40,60,80,100,120,140,160];function jt({rarity:c,settings:o,onChange:l,onTest:d}){const[b,p]=n.useState(!1),y=async i=>{try{const x=await m("browse_file");x&&(i==="sound"?l({...o,soundPath:x}):i==="font"?l({...o,fontPath:x}):i==="icon"&&l({...o,icon:x}))}catch(x){console.error(`Failed to select ${i}:`,x)}},r=()=>{switch(c){case"Common":return"#9CA3AF";case"Uncommon":return"#10B981";case"Rare":return"#3B82F6";case"Ultra Rare":return"#A855F7";case"Legendary":return"#F59E0B"}};return e.jsxs("div",{className:"bg-[#0f1420] border-2 rounded-xl overflow-hidden",style:{borderColor:r()},children:[e.jsxs("button",{onClick:()=>p(!b),className:"w-full p-5 flex items-center justify-between hover:bg-[#13172a] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:o.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:r()},children:c}),e.jsxs("p",{className:"text-sm text-gray-400",children:[c==="Common"&&"30%+ unlock rate",c==="Uncommon"&&"20-29% unlock rate",c==="Rare"&&"13-19% unlock rate",c==="Ultra Rare"&&"5-12% unlock rate",c==="Legendary"&&"0-4% unlock rate"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),d()},className:"px-4 py-2 rounded-lg font-semibold transition-all shadow-lg hover:scale-105",style:{backgroundColor:r()+"30",borderColor:r()+"50",color:r(),border:"2px solid"},children:"Test"}),e.jsx("span",{className:`transform transition-transform ${b?"rotate-180":""}`,children:"â–¼"})]})]}),b&&e.jsxs("div",{className:"p-6 border-t-2 space-y-6",style:{borderColor:r()+"30"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Border Color"}),e.jsx("input",{type:"color",value:o.borderColor,onChange:i=>l({...o,borderColor:i.target.value}),className:"w-full h-12 rounded-lg cursor-pointer border-2 border-[#2a3142]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Background Color"}),e.jsx("input",{type:"color",value:o.backgroundColor,onChange:i=>l({...o,backgroundColor:i.target.value}),className:"w-full h-12 rounded-lg cursor-pointer border-2 border-[#2a3142]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Title Color"}),e.jsx("input",{type:"color",value:o.titleColor,onChange:i=>l({...o,titleColor:i.target.value}),className:"w-full h-12 rounded-lg cursor-pointer border-2 border-[#2a3142]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Description Color"}),e.jsx("input",{type:"color",value:o.descriptionColor,onChange:i=>l({...o,descriptionColor:i.target.value}),className:"w-full h-12 rounded-lg cursor-pointer border-2 border-[#2a3142]"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200",children:"Background Opacity"}),e.jsxs("span",{className:"text-sm font-bold",style:{color:r()},children:[o.backgroundOpacity,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:o.backgroundOpacity,onChange:i=>l({...o,backgroundOpacity:parseInt(i.target.value)}),className:"w-full h-3 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, ${r()} 0%, ${r()} ${o.backgroundOpacity}%, rgb(15, 20, 32) ${o.backgroundOpacity}%, rgb(15, 20, 32) 100%)`}})]}),e.jsxs("div",{className:"flex items-center justify-between bg-[#1a1f3a] p-4 rounded-lg border-2 border-[#2a3142]",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"Glow Effect"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Add a glowing border effect"})]}),o.glowEffect&&e.jsx("input",{type:"color",value:o.glowColor,onChange:i=>l({...o,glowColor:i.target.value}),className:"h-10 w-20 rounded-lg cursor-pointer border-2 border-[#2a3142]"})]}),e.jsx("button",{onClick:()=>l({...o,glowEffect:!o.glowEffect}),className:`relative w-16 h-9 rounded-full transition-all shadow-inner ${o.glowEffect?"bg-blue-600":"bg-gray-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-7 h-7 bg-white rounded-full shadow-lg transition-transform ${o.glowEffect?"transform translate-x-7":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Position"}),e.jsx("select",{value:o.position,onChange:i=>l({...o,position:i.target.value}),className:"w-full bg-[#1a1f3a] border-2 border-[#2a3142] rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500",children:vt.map(i=>e.jsx("option",{value:i,children:i.split("-").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ")},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Scaling"}),e.jsx("select",{value:o.scaling,onChange:i=>l({...o,scaling:parseInt(i.target.value)}),className:"w-full bg-[#1a1f3a] border-2 border-[#2a3142] rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500",children:yt.map(i=>e.jsxs("option",{value:i,children:[i,"%"]},i))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:"Icon (Emoji or Image)"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:o.icon,onChange:i=>l({...o,icon:i.target.value}),placeholder:"Enter emoji or file path",className:"flex-1 bg-[#1a1f3a] border-2 border-[#2a3142] rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"}),(o.icon.includes("\\")||o.icon.includes("/")||/\.(png|jpg|jpeg|gif|bmp|svg|ico|webp)$/i.test(o.icon))&&e.jsx("button",{onClick:()=>{l({...o,icon:{Common:"â­",Uncommon:"ðŸŒŸ",Rare:"ðŸ’Ž","Ultra Rare":"ðŸ‘‘",Legendary:"ðŸ†"}[c]})},className:"bg-red-600 hover:bg-red-500 px-4 py-3 rounded-lg font-semibold transition-all",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>y("icon"),className:"bg-blue-600 hover:bg-blue-500 px-4 py-3 rounded-lg font-semibold transition-all flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Browse"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported formats: PNG, JPG, GIF, BMP, SVG, ICO, WEBP"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 mb-2 flex items-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4"}),"Custom Sound"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:o.soundPath||"",readOnly:!0,placeholder:"No sound selected",className:"flex-1 bg-[#1a1f3a] border-2 border-[#2a3142] rounded-lg px-4 py-3 text-white placeholder-gray-500"}),o.soundPath&&e.jsx("button",{onClick:()=>l({...o,soundPath:null}),className:"bg-red-600 hover:bg-red-500 px-4 py-3 rounded-lg font-semibold transition-all",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>y("sound"),className:"bg-blue-600 hover:bg-blue-500 px-4 py-3 rounded-lg font-semibold transition-all flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Browse"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported formats: MP3, WAV, OGG, FLAC"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 mb-2 flex items-center gap-2",children:[e.jsx(bt,{className:"w-4 h-4"}),"Custom Font"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:o.fontPath||"",readOnly:!0,placeholder:"No font selected",className:"flex-1 bg-[#1a1f3a] border-2 border-[#2a3142] rounded-lg px-4 py-3 text-white placeholder-gray-500"}),o.fontPath&&e.jsx("button",{onClick:()=>l({...o,fontPath:null}),className:"bg-red-600 hover:bg-red-500 px-4 py-3 rounded-lg font-semibold transition-all",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>y("font"),className:"bg-blue-600 hover:bg-blue-500 px-4 py-3 rounded-lg font-semibold transition-all flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Browse"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported formats: TTF, OTF, WOFF, WOFF2"})]})]})]})}function Nt(){const[c,o]=n.useState("settings"),[l,d]=n.useState({ludusaviPath:"",backupPath:"",autoStart:!0,notificationsEnabled:!0,gameExecutables:{}}),[b,p]=n.useState(!1),[y,r]=n.useState(null),[i,x]=n.useState(!1),[u,g]=n.useState([]),[f,C]=n.useState(""),[R,L]=n.useState([]),[M,Q]=n.useState(!1),[Y,G]=n.useState(!1),[le,fe]=n.useState(new Set),[U,ve]=n.useState([]),[_,oe]=n.useState(null),[ye,K]=n.useState([]),[je,J]=n.useState(!1),[wt,kt]=n.useState(!1),[St,Ct]=n.useState(!1),[X,Ne]=n.useState(""),[we,Z]=n.useState([]),[Ue,ne]=n.useState(!1),O=n.useRef(null),[_t,Et]=n.useState({}),[E,ke]=n.useState(null),[$,ie]=n.useState(!1),[ce,D]=n.useState(""),[k,ee]=n.useState(null),[Se,te]=n.useState([]),[At,de]=n.useState(!1),B=n.useRef(null),[T,Ce]=n.useState({duration:6}),[w,_e]=n.useState(()=>{const t=localStorage.getItem("raritySettings");if(t)try{return JSON.parse(t)}catch{return ge}return ge}),[I,Oe]=n.useState([]),[De,Ee]=n.useState(!1),[Be,Ae]=n.useState(""),[$e,me]=n.useState([]),[He,Te]=n.useState(!1),xe=n.useRef(null),ze=t=>{const s={};return!t||t.length===0||(t.forEach(a=>{if(!a||a.length===0)return;const h=a.charAt(0).toUpperCase(),v=/[0-9]/.test(h)?"0-9":h;s[v]||(s[v]=[]),s[v].push(a)}),Object.keys(s).forEach(a=>{s[a].sort()})),s},Ve=t=>{const s=new Set(le);s.has(t)?s.delete(t):s.add(t),fe(s)},ue=async()=>{Ee(!0);try{const t=await m("get_all_exclusions");Oe(t)}catch(t){r({type:"error",text:`Failed to load exclusions: ${t}`})}finally{Ee(!1)}},We=async(t,s)=>{try{await m("add_exclusion",{appId:t,name:s}),r({type:"success",text:`Added ${s} to exclusions`}),ue(),Ae(""),me([])}catch(a){r({type:"error",text:`Failed to add exclusion: ${a}`})}},qe=async(t,s)=>{try{await m("remove_exclusion",{appId:t}),r({type:"success",text:`Removed ${s} from exclusions`}),ue()}catch(a){r({type:"error",text:`Failed to remove exclusion: ${a}`})}},Qe=async t=>{if(Ae(t),xe.current&&clearTimeout(xe.current),t.trim().length<2){me([]);return}xe.current=setTimeout(async()=>{Te(!0);try{const s=await m("search_steam_games",{query:t});me(s)}catch(s){r({type:"error",text:`Failed to search Steam games: ${s}`})}finally{Te(!1)}},500)};n.useEffect(()=>{Ye(),H(),m("get_achievement_duration").then(a=>{console.log("[App] Loaded duration from backend:",a),Ce({duration:a})}).catch(a=>{console.error("[App] Failed to load duration from backend:",a)});const t=re("game-not-found",a=>{r({type:"error",text:`Game "${a.payload.name}" not found in Ludusavi manifest. Please add it manually in the Games tab.`})}),s=re("game-detected",a=>{r({type:"success",text:`Game Save Monitor detected: ${a.payload}`}),setTimeout(()=>r(null),5e3)});return()=>{t.then(a=>a()),s.then(a=>a())}},[]),n.useEffect(()=>{m("set_achievement_duration",{duration:T.duration}).then(()=>{console.log("[App] Duration saved to backend:",T.duration)}).catch(t=>{console.error("[App] Failed to save duration to backend:",t)})},[T]),n.useEffect(()=>{localStorage.setItem("raritySettings",JSON.stringify(w))},[w]),n.useEffect(()=>{m("sync_settings_to_overlay",{achievementSettings:{},raritySettings:w}).catch(t=>{console.error("Failed to sync rarity settings to overlay:",t)})},[w]),n.useEffect(()=>{if(B.current&&clearTimeout(B.current),!f.trim()){L(u),G(!1);return}return G(!0),B.current=setTimeout(()=>{const t=f.toLowerCase(),s=u.filter(a=>a.toLowerCase().includes(t));L(s),G(!1)},200),()=>{B.current&&clearTimeout(B.current)}},[f,u]),n.useEffect(()=>{if(O.current&&clearTimeout(O.current),!X.trim()){Z([]),ne(!1);return}return ne(!0),O.current=setTimeout(async()=>{try{const t=await m("search_steam_games",{query:X});Z(t)}catch(t){console.error("Failed to search Steam games:",t),r({type:"error",text:`Failed to search: ${t}`}),Z([])}finally{ne(!1)}},500),()=>{O.current&&clearTimeout(O.current)}},[X]),n.useEffect(()=>{let s=(async()=>await re("achievement-unlocked",h=>{const v=h.payload;console.log("ðŸ† Achievement unlocked event received in App:",v),K(A=>{if(A.length===0)return A;const F=A.findIndex(N=>N.achievement_id===v.achievement_id);if(F!==-1){const N=[...A];return N[F]={...N[F],achieved:!0,unlock_time:v.unlock_time},N}return A}),ve(A=>{const F=A.findIndex(N=>N.app_id===v.app_id);if(F!==-1){const N=[...A];return N[F]={...N[F],unlocked_achievements:N[F].unlocked_achievements+1},N}return A})}))();return()=>{s.then(a=>a())}},[]);const Ye=async()=>{try{const t=await m("get_config");d(t)}catch(t){console.error("Failed to load config:",t)}},Fe=async()=>{if(!l.ludusaviPath){r({type:"error",text:"Please configure Ludusavi path first"});return}Q(!0);try{const t=await m("get_ludusavi_manifest");if(g(t),L(t),t.length>0){const s=t[0].charAt(0).toUpperCase(),a=/[0-9]/.test(s)?"0-9":s;fe(new Set([a]))}r({type:"success",text:`Loaded ${t.length} games from Ludusavi manifest (using cache - instant load!)`})}catch(t){r({type:"error",text:`Failed to load Ludusavi manifest: ${t}`})}finally{Q(!1)}},Ke=async()=>{p(!0),r(null);try{if(!l.ludusaviPath||!l.backupPath){r({type:"error",text:"Please fill in all required fields"}),p(!1);return}await m("save_config",{config:l}),r({type:"success",text:"Configuration saved successfully! Monitoring will restart."})}catch(t){r({type:"error",text:`Failed to save configuration: ${t}`})}finally{p(!1)}},Je=async()=>{try{const t=await m("browse_file");t&&d({...l,ludusaviPath:t})}catch(t){console.error("Failed to browse file:",t)}},Xe=async()=>{try{const t=await m("browse_folder");t&&d({...l,backupPath:t})}catch(t){console.error("Failed to browse folder:",t)}},Ze=async()=>{if(!l.ludusaviPath){r({type:"error",text:"Please select Ludusavi executable first"});return}x(!0),r(null);try{const t=await m("test_ludusavi",{path:l.ludusaviPath});t.success?r({type:"success",text:"Ludusavi connection successful!"}):r({type:"error",text:`Ludusavi test failed: ${t.error||"Unknown error"}`})}catch(t){r({type:"error",text:`Failed to test Ludusavi: ${t}`})}finally{x(!1)}},et=async t=>{try{const s=await m("browse_file");if(s){const a={...l,gameExecutables:{...l.gameExecutables,[t]:s}};d(a),p(!0);try{await m("save_config",{config:a}),r({type:"success",text:`Added executable for ${t} and saved configuration`}),setTimeout(()=>r(null),3e3)}catch(h){r({type:"error",text:`Failed to save configuration: ${h}`})}finally{p(!1)}}}catch(s){console.error("Failed to browse file:",s)}},tt=async t=>{const s={...l.gameExecutables};delete s[t];const a={...l,gameExecutables:s};d(a),p(!0);try{await m("save_config",{config:a}),r({type:"success",text:`Removed executable for ${t}`}),setTimeout(()=>r(null),3e3)}catch(h){r({type:"error",text:`Failed to save: ${h}`})}finally{p(!1)}},H=async()=>{J(!0);try{const t=await m("get_all_achievements");ve(t)}catch(t){r({type:"error",text:`Failed to load achievements: ${t}`})}finally{J(!1)}},Pe=async t=>{J(!0),oe(t);try{const s=await m("get_game_achievements",{appId:t.app_id});s.length>0&&(console.log("First achievement data:",s[0]),console.log("Icon URL:",s[0].icon_url),console.log("Icon Gray URL:",s[0].icon_gray_url)),K(s)}catch(s){r({type:"error",text:`Failed to load achievements for ${t.game_name}: ${s}`})}finally{J(!1)}},st=async t=>{try{de(!0),r({type:"success",text:`Checking sources for ${t.name}...`});const s=await m("check_game_sources",{appId:t.app_id,gameName:t.name});te(s),ee(t),de(!1),r(null)}catch(s){de(!1),r({type:"error",text:`Failed to check sources: ${s}`})}},at=async t=>{if(k)try{r({type:"success",text:`Adding ${k.name} from ${t}...`});const s=await m("add_game_from_source",{appId:k.app_id,gameName:k.name,source:t});r({type:"success",text:s});const a=await m("check_backup_exists",{gameName:k.name});if(a&&window.confirm(`A backup file was found for ${k.name}.

Would you like to restore achievements from the backup?

The backup will be imported while still monitoring the selected source for new achievements.`))try{const v=await m("restore_from_backup",{appId:k.app_id,gameName:k.name,backupPath:a});r({type:"success",text:`Successfully restored ${v} achievements from backup. Now monitoring ${t} for new achievements.`})}catch(v){r({type:"error",text:`Failed to restore backup: ${v}`})}await H(),Ne(""),Z([]),ee(null),te([])}catch(s){r({type:"error",text:`Failed to add game: ${s}`})}},rt=async(t,s)=>{try{const a=await m("export_game_achievements",{appId:t,gameName:s});r({type:"success",text:a})}catch(a){r({type:"error",text:`Failed to export achievements: ${a}`})}},lt=async(t,s,a)=>{a.stopPropagation();try{const h=await m("remove_game_from_tracking",{appId:t});r({type:"success",text:`Removed ${s}`}),await H(),_?.app_id===t&&(oe(null),K([]))}catch(h){r({type:"error",text:`Failed to remove game: ${h}`})}},ot=t=>{if(ke(t),ie(t.achieved),t.unlock_time){const s=new Date(t.unlock_time*1e3),a=s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")+"T"+String(s.getHours()).padStart(2,"0")+":"+String(s.getMinutes()).padStart(2,"0");D(a)}else{const s=new Date,a=s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0")+"T"+String(s.getHours()).padStart(2,"0")+":"+String(s.getMinutes()).padStart(2,"0");D(a)}},se=()=>{ke(null),ie(!1),D("")},nt=async()=>{if(E?.id)try{let t=null;if($&&ce){const s=new Date(ce);t=Math.floor(s.getTime()/1e3)}await m("update_achievement_status",{achievementId:E.id,achieved:$,unlockTime:$?t:null}),r({type:"success",text:`Achievement "${E.display_name}" updated successfully!`}),_&&await Pe(_),await H(),se()}catch(t){r({type:"error",text:`Failed to update achievement: ${t}`})}},Re=({achievement:t})=>{const[s,a]=n.useState(!1),h=t.achieved?t.icon_url:t.icon_gray_url;return!h||s?e.jsx("div",{className:`flex-shrink-0 p-3 rounded-lg ${t.achieved?"bg-emerald-600/20":"bg-gray-700/20"}`,children:e.jsx(S,{className:`w-10 h-10 ${t.achieved?"text-emerald-400":"text-gray-600"}`})}):e.jsx("img",{src:h,alt:t.display_name,className:"w-16 h-16 flex-shrink-0 rounded-lg border-2 border-[#2a3142] object-cover",onError:()=>a(!0)})},ae=Object.keys(l.gameExecutables);return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] text-white",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#1a1f3a] to-[#2a2f4a] border-b border-[#3a4466] shadow-xl",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-600/20 rounded-xl border border-blue-500/30",children:e.jsx(Le,{className:"w-8 h-8 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Steam Backup Manager"}),e.jsx("p",{className:"text-blue-300/80 text-sm mt-1",children:"Automatic game save backups with Ludusavi"})]})]})})}),e.jsx("div",{className:"bg-[#0f1420] border-b border-[#2a3142]",children:e.jsx("div",{className:"max-w-7xl mx-auto px-8",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:()=>o("settings"),className:`px-6 py-4 font-semibold transition-all relative ${c==="settings"?"text-blue-400 bg-[#1a1f3a]":"text-gray-400 hover:text-gray-200 hover:bg-[#13172a]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{children:"Settings"})]}),c==="settings"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-t"})]}),e.jsxs("button",{onClick:()=>{o("games"),u.length===0&&Fe()},className:`px-6 py-4 font-semibold transition-all relative ${c==="games"?"text-blue-400 bg-[#1a1f3a]":"text-gray-400 hover:text-gray-200 hover:bg-[#13172a]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{children:"Game Executables"}),e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-blue-600/30 text-blue-300 text-xs rounded-full border border-blue-500/30",children:ae.length})]}),c==="games"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-t"})]}),e.jsxs("button",{onClick:()=>{o("exclusions"),I.length===0&&ue()},className:`px-6 py-4 font-semibold transition-all relative ${c==="exclusions"?"text-blue-400 bg-[#1a1f3a]":"text-gray-400 hover:text-gray-200 hover:bg-[#13172a]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{children:"Exclusions"}),e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-red-600/30 text-red-300 text-xs rounded-full border border-red-500/30",children:I.length})]}),c==="exclusions"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-t"})]}),e.jsxs("button",{onClick:()=>{o("achievements"),U.length===0&&H()},className:`px-6 py-4 font-semibold transition-all relative ${c==="achievements"?"text-blue-400 bg-[#1a1f3a]":"text-gray-400 hover:text-gray-200 hover:bg-[#13172a]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{children:"Achievements"}),e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-amber-600/30 text-amber-300 text-xs rounded-full border border-amber-500/30",children:U.length})]}),c==="achievements"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-t"})]}),e.jsxs("button",{onClick:()=>o("customization"),className:`px-6 py-4 font-semibold transition-all relative ${c==="customization"?"text-blue-400 bg-[#1a1f3a]":"text-gray-400 hover:text-gray-200 hover:bg-[#13172a]"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{children:"Achievement Customization"})]}),c==="customization"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-t"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-8 py-8",children:[y&&e.jsxs("div",{className:`rounded-xl p-4 mb-6 flex items-center gap-3 border shadow-lg ${y.type==="success"?"bg-emerald-950/50 border-emerald-600/50 text-emerald-100":"bg-red-950/50 border-red-600/50 text-red-100"}`,children:[y.type==="success"?e.jsx(z,{className:"w-6 h-6 text-emerald-400 flex-shrink-0"}):e.jsx(dt,{className:"w-6 h-6 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"flex-1 font-medium",children:y.text}),e.jsx("button",{onClick:()=>r(null),className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(P,{className:"w-5 h-5"})})]}),c==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-950/30 border border-blue-600/30 rounded-xl p-5 flex gap-4 shadow-lg",children:[e.jsx(W,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-100/90 space-y-1",children:[e.jsx("p",{className:"font-semibold text-blue-300 text-base mb-2",children:"ðŸŽ® Steamworks Integration"}),e.jsx("p",{children:"âœ“ This app uses Steamworks SDK for automatic Steam game detection"}),e.jsx("p",{children:"âœ“ Achievement tracking requires a Steam Web API Key"}),e.jsxs("p",{children:["âœ“ Get your free API key at: ",e.jsx("a",{href:"https://steamcommunity.com/dev/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"steamcommunity.com/dev/apikey"})]})]})]}),e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-8 border border-[#2a3142] shadow-xl space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-[#2a3142]",children:[e.jsx(be,{className:"w-7 h-7 text-blue-400"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Configuration"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-blue-400"}),"Ludusavi Executable Path",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:l.ludusaviPath,onChange:t=>d({...l,ludusaviPath:t.target.value}),placeholder:"C:\\Program Files\\Ludusavi\\ludusavi.exe",className:"flex-1 bg-[#0f1420] border-2 border-[#2a3142] rounded-lg px-4 py-3.5 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-sm"}),e.jsx("button",{onClick:Je,className:"bg-blue-600 hover:bg-blue-500 px-6 py-3.5 rounded-lg font-semibold transition-all shadow-lg hover:shadow-blue-500/20 border border-blue-500/30",children:"Browse"}),e.jsx("button",{onClick:Ze,disabled:i,className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3.5 rounded-lg font-semibold transition-all shadow-lg hover:shadow-emerald-500/20 disabled:opacity-50 disabled:cursor-not-allowed border border-emerald-500/30",children:i?"Testing...":"Test"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-400"}),"Backup Directory",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:l.backupPath,onChange:t=>d({...l,backupPath:t.target.value}),placeholder:"C:\\GameBackups",className:"flex-1 bg-[#0f1420] border-2 border-[#2a3142] rounded-lg px-4 py-3.5 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-sm"}),e.jsx("button",{onClick:Xe,className:"bg-blue-600 hover:bg-blue-500 px-6 py-3.5 rounded-lg font-semibold transition-all shadow-lg hover:shadow-blue-500/20 border border-blue-500/30",children:"Browse"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-amber-400"}),"Steam Web API Key",e.jsx("span",{className:"text-amber-400 text-xs",children:"(Required for Achievements)"})]}),e.jsx("input",{type:"text",value:l.steamApiKey||"",onChange:t=>d({...l,steamApiKey:t.target.value}),placeholder:"Get your API key from steamcommunity.com/dev/apikey",className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg px-4 py-3.5 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-sm"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Your API key is stored locally and only used to fetch achievement data from Steam"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-blue-400"}),"Steam User ID",e.jsx("span",{className:"text-blue-400 text-xs",children:"(Optional - for local achievement detection)"})]}),e.jsx("input",{type:"text",value:l.steamUserId||"",onChange:t=>d({...l,steamUserId:t.target.value}),placeholder:"247367579",className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg px-4 py-3.5 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-sm"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Your Steam3 ID number (find it in C:\\Program Files (x86)\\Steam\\userdata\\). If not set, the first user will be used."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-purple-400"}),"Steam64 ID",e.jsx("span",{className:"text-purple-400 text-xs",children:"(Optional - for fetching your achievement unlock status from Steam API)"})]}),e.jsx("input",{type:"text",value:l.steamId64||"",onChange:t=>d({...l,steamId64:t.target.value}),placeholder:"76561198207633307",className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg px-4 py-3.5 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-sm"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Your Steam64 ID (find it on steamid.io or steamidfinder.com). Used to fetch your personal achievement unlock times from Steam Web API."})]}),e.jsxs("div",{className:"flex items-center justify-between bg-[#0f1420] p-5 rounded-lg border-2 border-[#2a3142]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-base",children:"Start with Windows"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Launch app automatically when Windows starts"})]}),e.jsx("button",{onClick:()=>d({...l,autoStart:!l.autoStart}),className:`relative w-16 h-9 rounded-full transition-all shadow-inner ${l.autoStart?"bg-blue-600":"bg-gray-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-7 h-7 bg-white rounded-full shadow-lg transition-transform ${l.autoStart?"transform translate-x-7":""}`})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-[#0f1420] p-5 rounded-lg border-2 border-[#2a3142]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-base",children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Show Windows notifications for backup status"})]}),e.jsx("button",{onClick:()=>d({...l,notificationsEnabled:!l.notificationsEnabled}),className:`relative w-16 h-9 rounded-full transition-all shadow-inner ${l.notificationsEnabled?"bg-blue-600":"bg-gray-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-7 h-7 bg-white rounded-full shadow-lg transition-transform ${l.notificationsEnabled?"transform translate-x-7":""}`})})]}),e.jsx("div",{className:"pt-3",children:e.jsx("button",{onClick:Ke,disabled:b,className:"w-full bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white font-bold py-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-emerald-500/30 border border-emerald-400/30",children:b?"Saving Configuration...":"Save Configuration"})})]})]}),c==="games"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-8 border border-[#2a3142] shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg border border-blue-500/30",children:e.jsx(he,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Game Executables"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Map game executables to Ludusavi game names for process-based detection"})]})]}),e.jsx("button",{onClick:Fe,disabled:M,className:"bg-blue-600 hover:bg-blue-500 px-5 py-3 rounded-lg font-semibold transition-all shadow-lg hover:shadow-blue-500/20 disabled:opacity-50 border border-blue-500/30",children:M?"Loading...":"Refresh Manifest"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:f,onChange:t=>C(t.target.value),placeholder:"Search for a game in Ludusavi manifest...",className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg pl-12 pr-4 py-4 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all"}),Y&&e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-700 border-t-blue-500"})})]})]}),ae.length>0&&e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-8 border border-[#2a3142] shadow-xl",children:[e.jsxs("h3",{className:"text-lg font-bold mb-5 flex items-center gap-2 text-white",children:[e.jsx(z,{className:"w-6 h-6 text-emerald-400"}),"Configured Games",e.jsx("span",{className:"ml-2 px-3 py-1 bg-emerald-600/30 text-emerald-300 text-sm rounded-full border border-emerald-500/30",children:ae.length})]}),e.jsx("div",{className:"space-y-3",children:ae.map(t=>e.jsxs("div",{className:"bg-[#0f1420] border-2 border-[#2a3142] rounded-lg p-4 flex items-center justify-between hover:border-emerald-500/30 transition-all",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-white text-base",children:t}),e.jsx("p",{className:"text-sm text-gray-400 truncate font-mono mt-1",children:l.gameExecutables[t]})]}),e.jsx("button",{onClick:()=>tt(t),className:"ml-4 p-2.5 text-red-400 hover:text-red-300 hover:bg-red-950/50 rounded-lg transition-all border border-transparent hover:border-red-500/30",title:"Remove",children:e.jsx(Me,{className:"w-5 h-5"})})]},t))})]}),e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl border border-[#2a3142] shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-[#2a3142] bg-[#13172a]",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Available Games in Ludusavi Manifest"}),u.length>0&&e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Showing ",e.jsx("span",{className:"text-blue-400 font-semibold",children:R.length})," of ",e.jsx("span",{className:"text-blue-400 font-semibold",children:u.length})," games"]})]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto",id:"games-scroll-container",children:M?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-700 border-t-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"Loading games from Ludusavi manifest..."})]}):Y?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-3 border-gray-700 border-t-blue-500 mb-3"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"Searching..."})]}):R.length===0?e.jsxs("div",{className:"p-12 text-center text-gray-400",children:[e.jsx(he,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:f?"No games found matching your search":'Click "Refresh Manifest" to load games'})]}):e.jsx("div",{children:Object.entries(ze(R)).sort().map(([t,s])=>e.jsxs("div",{className:"border-b border-[#2a3142]",children:[e.jsxs("button",{onClick:()=>Ve(t),className:"w-full p-4 hover:bg-[#13172a] transition-colors flex items-center justify-between font-semibold text-white",children:[e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:t}),e.jsx("span",{className:"text-sm text-gray-400 bg-[#0f1420] px-2 py-1 rounded",children:s.length})]}),e.jsx("span",{className:`transform transition-transform ${le.has(t)?"rotate-180":""}`,children:"â–¼"})]}),le.has(t)&&e.jsx("div",{className:"divide-y divide-[#2a3142] bg-[#0f1420]",children:s.map(a=>{const h=a in l.gameExecutables;return e.jsxs("div",{className:"p-4 hover:bg-[#13172a] transition-colors flex items-center justify-between",children:[e.jsx("span",{className:`font-medium ${h?"text-emerald-400":"text-gray-200"}`,children:a}),e.jsxs("button",{onClick:()=>et(a),disabled:b,className:`flex items-center gap-2 px-4 py-2.5 rounded-lg font-semibold transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed ${h?"bg-emerald-950/50 text-emerald-400 border-2 border-emerald-600/40 hover:bg-emerald-900/50":"bg-blue-600 hover:bg-blue-500 text-white border-2 border-blue-500/30"}`,children:[e.jsx(Ie,{className:"w-4 h-4"}),h?"Change EXE":"Select EXE"]})]},a)})})]},t))})})]})]}),c==="achievements"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-5 border border-[#2a3142] shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 bg-amber-600/20 rounded-lg border border-amber-500/30",children:e.jsx(S,{className:"w-5 h-5 text-amber-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Add New Game"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:X,onChange:t=>Ne(t.target.value),placeholder:"Search Steam games...",className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg pl-10 pr-3 py-2.5 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all"}),Ue&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-700 border-t-blue-500"})})]}),we.length>0&&e.jsx("div",{className:"mt-3 bg-[#0f1420] rounded-lg border border-[#2a3142] max-h-40 overflow-y-auto",children:e.jsx("div",{className:"divide-y divide-[#2a3142]",children:we.map(t=>e.jsxs("button",{onClick:()=>st(t),className:"w-full p-3 hover:bg-[#13172a] transition-colors flex items-center justify-between group text-left",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-medium text-white text-sm group-hover:text-blue-400 transition-colors truncate",children:t.name})}),e.jsx(ht,{className:"w-4 h-4 text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 ml-2"})]},t.app_id))})})]}),e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-5 border border-[#2a3142] shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-600/20 rounded-lg border border-blue-500/30",children:e.jsx(q,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Filter Games"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:f,onChange:t=>C(t.target.value),placeholder:"Filter added games...",className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg pl-10 pr-3 py-2.5 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all"})]})]})]}),je&&U.length===0?e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-12 border border-[#2a3142] shadow-xl text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-700 border-t-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"Loading games..."})]}):U.length===0?e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-12 border border-[#2a3142] shadow-xl text-center",children:[e.jsx(S,{className:"w-16 h-16 mx-auto mb-4 opacity-50 text-gray-600"}),e.jsx("p",{className:"text-gray-400 font-medium mb-4",children:"No games added yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Search for a Steam game above to start tracking achievements"})]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:U.filter(t=>f.trim()===""||t.game_name.toLowerCase().includes(f.toLowerCase())).map(t=>{const s=Math.round(t.unlocked_achievements/t.total_achievements*100);return e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl border border-[#2a3142] shadow-xl hover:border-blue-500/50 transition-all cursor-pointer overflow-hidden group relative",onClick:()=>Pe(t),children:[e.jsx("button",{onClick:a=>lt(t.app_id,t.game_name,a),className:"absolute top-2 right-2 z-10 p-1.5 bg-red-600/90 hover:bg-red-500 rounded-lg opacity-0 group-hover:opacity-100 transition-all shadow-lg border border-red-500/50",title:"Remove game",children:e.jsx(P,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"h-32 relative overflow-hidden",children:[e.jsx("img",{src:`https://cdn.cloudflare.steamstatic.com/steam/apps/${t.app_id}/header.jpg`,alt:t.game_name,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none",a.currentTarget.parentElement&&(a.currentTarget.parentElement.className="h-32 bg-gradient-to-br from-blue-900/30 to-purple-900/30 relative overflow-hidden")}}),e.jsx("div",{className:"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-all"}),e.jsx("div",{className:"absolute bottom-2 left-3 right-3",children:e.jsxs("div",{className:"text-xs font-semibold text-white/90",children:[t.unlocked_achievements," / ",t.total_achievements]})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-sm font-bold text-white line-clamp-2 mb-2 group-hover:text-blue-400 transition-colors",children:t.game_name}),e.jsx("div",{className:"bg-[#0f1420] rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-emerald-500 transition-all duration-500",style:{width:`${s}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[s,"% Complete"]}),e.jsx("span",{className:"text-xs text-blue-400",children:t.source})]})]})]},`${t.app_id}-${t.source}`)})}),_&&e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl border border-[#2a3142] shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-6 bg-[#13172a] border-b border-[#2a3142]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:_.game_name}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[_.unlocked_achievements," of ",_.total_achievements," achievements unlocked"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>rt(_.app_id,_.game_name),className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg font-semibold transition-all shadow-lg hover:shadow-emerald-500/20 border border-emerald-500/30",children:[e.jsx(ut,{className:"w-4 h-4"}),"Export"]}),e.jsx("button",{onClick:()=>{oe(null),K([])},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(P,{className:"w-6 h-6"})})]})]})}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto p-6 space-y-3",children:je?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-3 border-gray-700 border-t-blue-500 mb-3"}),e.jsx("p",{className:"text-gray-400",children:"Loading achievements..."})]}):ye.length===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:e.jsx("p",{children:"No achievement details found"})}):ye.map(t=>e.jsx("div",{onClick:()=>ot(t),className:`p-4 rounded-lg border-2 transition-all cursor-pointer hover:scale-[1.02] ${t.achieved?"bg-emerald-950/30 border-emerald-600/40 hover:border-emerald-500/60":"bg-[#0f1420] border-[#2a3142] hover:border-blue-500/60"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Re,{achievement:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-bold ${t.achieved?"text-emerald-300":"text-white"}`,children:t.display_name}),t.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.description}),t.global_unlock_percentage!==null&&t.global_unlock_percentage!==void 0&&e.jsxs("p",{className:"text-xs text-blue-400 mt-2",children:["Global unlock rate: ",t.global_unlock_percentage.toFixed(1),"%"]}),t.unlock_time&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Unlocked: ",new Date(t.unlock_time*1e3).toLocaleString()]})]}),t.achieved&&e.jsx(z,{className:"flex-shrink-0 w-6 h-6 text-emerald-400"})]})},t.achievement_id))})]})]}),c==="exclusions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-5 border border-[#2a3142] shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 bg-red-600/20 rounded-lg border border-red-500/30",children:e.jsx(V,{className:"w-5 h-5 text-red-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Add App/Game to Exclusions"})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Excluded apps will not be detected or monitored for achievements. Perfect for utility apps like Wallpaper Engine, Borderless Gaming, etc."}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:Be,onChange:t=>Qe(t.target.value),placeholder:"Search Steam apps and games...",className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg pl-10 pr-3 py-2.5 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all"}),He&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-700 border-t-blue-500"})})]}),$e.length>0&&e.jsx("div",{className:"mt-3 bg-[#0f1420] rounded-lg border border-[#2a3142] max-h-60 overflow-y-auto",children:e.jsx("div",{className:"divide-y divide-[#2a3142]",children:$e.map(t=>{const s=I.some(a=>a.app_id===t.app_id);return e.jsxs("button",{onClick:()=>!s&&We(t.app_id,t.name),disabled:s,className:`w-full p-3 transition-colors flex items-center justify-between group text-left ${s?"opacity-50 cursor-not-allowed":"hover:bg-[#13172a] cursor-pointer"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium text-sm truncate ${s?"text-gray-500":"text-white group-hover:text-red-400 transition-colors"}`,children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["AppID: ",t.app_id]})]}),s?e.jsx(z,{className:"w-4 h-4 text-gray-500 flex-shrink-0 ml-2"}):e.jsx(V,{className:"w-4 h-4 text-red-400 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 ml-2"})]},t.app_id)})})})]}),De?e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-12 border border-[#2a3142] shadow-xl text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-700 border-t-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"Loading exclusions..."})]}):I.length===0?e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-12 border border-[#2a3142] shadow-xl text-center",children:[e.jsx(V,{className:"w-16 h-16 mx-auto mb-4 opacity-50 text-gray-600"}),e.jsx("p",{className:"text-gray-400 font-medium mb-4",children:"No exclusions added yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Search for a Steam app above to exclude it from monitoring"})]}):e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-5 border border-[#2a3142] shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 bg-red-600/20 rounded-lg border border-red-500/30",children:e.jsx(V,{className:"w-5 h-5 text-red-400"})}),e.jsxs("h3",{className:"text-lg font-bold text-white",children:["Excluded Apps (",I.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:I.map(t=>e.jsx("div",{className:"bg-[#0f1420] rounded-lg p-4 border border-[#2a3142] hover:border-red-500/30 transition-all group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white text-sm truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["AppID: ",t.app_id]})]}),e.jsx("button",{onClick:()=>qe(t.app_id,t.name),className:"ml-4 p-2 bg-red-600/20 hover:bg-red-600/30 rounded-lg border border-red-500/30 hover:border-red-500/50 transition-all group-hover:scale-105",title:"Remove from exclusions",children:e.jsx(Me,{className:"w-4 h-4 text-red-400"})})]})},t.app_id))})]})]}),c==="customization"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl p-8 border border-[#2a3142] shadow-xl space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-[#2a3142]",children:[e.jsx("div",{className:"p-2 bg-amber-600/20 rounded-lg border border-amber-500/30",children:e.jsx(S,{className:"w-7 h-7 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Achievement Customization"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Customize how achievement notifications appear"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-200",children:"Notification Duration"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"How long achievement notifications stay on screen"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-400",children:T.duration}),e.jsx("span",{className:"text-sm text-gray-400 ml-1",children:"seconds"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"range",min:"2",max:"10",step:"1",value:T.duration,onChange:t=>Ce({...T,duration:parseInt(t.target.value)}),className:"w-full h-3 bg-[#0f1420] rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, rgb(59, 130, 246) 0%, rgb(59, 130, 246) ${(T.duration-2)/8*100}%, rgb(15, 20, 32) ${(T.duration-2)/8*100}%, rgb(15, 20, 32) 100%)`}}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"2s"}),e.jsx("span",{children:"3s"}),e.jsx("span",{children:"4s"}),e.jsx("span",{children:"5s"}),e.jsx("span",{children:"6s"}),e.jsx("span",{children:"7s"}),e.jsx("span",{children:"8s"}),e.jsx("span",{children:"9s"}),e.jsx("span",{children:"10s"})]})]})]}),e.jsx("div",{className:"pt-6 border-t border-[#2a3142]",children:e.jsx("button",{onClick:async()=>{try{await m("test_overlay"),console.log("Test overlay triggered")}catch(t){console.error("Failed to test overlay:",t)}},className:"w-full bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 text-white font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-purple-500/30 border border-purple-400/30",children:"ðŸŽ® Test Achievement Notification"})}),e.jsx("div",{className:"pt-6 border-t border-[#2a3142]",children:e.jsxs("div",{className:"flex items-center justify-between bg-[#0f1420] p-5 rounded-lg border-2 border-[#2a3142]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-base",children:"Enable Rarity-Based Notifications"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Use different styles based on achievement rarity (determined by global unlock percentage)"})]}),e.jsx("button",{onClick:()=>_e({...w,enabled:!w.enabled}),className:`relative w-16 h-9 rounded-full transition-all shadow-inner ${w.enabled?"bg-blue-600":"bg-gray-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-7 h-7 bg-white rounded-full shadow-lg transition-transform ${w.enabled?"transform translate-x-7":""}`})})]})}),w.enabled&&e.jsxs("div",{className:"pt-6 border-t border-[#2a3142] space-y-4",children:[e.jsxs("div",{className:"bg-blue-950/30 border border-blue-600/30 rounded-xl p-5 flex gap-4",children:[e.jsx(W,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-100/90",children:[e.jsx("p",{className:"font-semibold text-blue-300 text-base mb-2",children:"Rarity System"}),e.jsx("p",{children:"Achievements are categorized by their global unlock percentage:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-gray-300",children:"Common:"})," 30%+ of players have unlocked"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-green-400",children:"Uncommon:"})," 20-29% unlock rate"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-blue-400",children:"Rare:"})," 13-19% unlock rate"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-purple-400",children:"Ultra Rare:"})," 5-12% unlock rate"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold text-amber-400",children:"Legendary:"})," 0-4% unlock rate"]})]})]})]}),["Common","Uncommon","Rare","Ultra Rare","Legendary"].map(t=>e.jsx(jt,{rarity:t,settings:w[t],onChange:s=>{_e({...w,[t]:s})},onTest:async()=>{try{await m("test_rarity_notification",{rarity:t}),console.log(`Test ${t} notification triggered`)}catch(s){console.error(`Failed to test ${t} notification:`,s)}}},t))]}),e.jsxs("div",{className:"bg-blue-950/30 border border-blue-600/30 rounded-xl p-5 flex gap-4",children:[e.jsx(W,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-100/90 space-y-1",children:[e.jsx("p",{className:"font-semibold text-blue-300 text-base mb-2",children:"Preview"}),e.jsx("p",{children:'Click the "Test Achievement Notification" button or individual rarity test buttons to preview your customization settings.'}),e.jsx("p",{className:"text-xs text-blue-200/70 mt-2",children:"Changes are saved automatically and will apply to all future achievement notifications."})]})]})]})})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-8",onClick:se,children:e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl border-2 border-[#2a3142] shadow-2xl w-full max-w-2xl",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-[#2a3142] bg-[#13172a]",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx(Re,{achievement:E}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:E.display_name}),E.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:E.description})]})]}),e.jsx("button",{onClick:se,className:"p-2 hover:bg-white/10 rounded-lg transition-colors ml-4",children:e.jsx(P,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-[#0f1420] p-5 rounded-lg border-2 border-[#2a3142]",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-base",children:"Achievement Status"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:$?"Marked as unlocked":"Marked as locked"})]}),e.jsx("button",{onClick:()=>ie(!$),className:`relative w-16 h-9 rounded-full transition-all shadow-inner ${$?"bg-emerald-600":"bg-gray-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-7 h-7 bg-white rounded-full shadow-lg transition-transform ${$?"transform translate-x-7":""}`})})]}),$&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-200 flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-amber-400"}),"Unlock Date & Time"]}),e.jsx("input",{type:"datetime-local",value:ce,onChange:t=>D(t.target.value),className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono text-sm"}),e.jsxs("div",{className:"pt-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2",children:"Or paste Unix timestamp (seconds):"}),e.jsx("input",{type:"text",placeholder:"e.g., 1234567890",onPaste:t=>{const s=t.clipboardData.getData("text"),a=parseInt(s.trim());if(!isNaN(a)&&a>0){const h=new Date(a*1e3),v=h.getFullYear()+"-"+String(h.getMonth()+1).padStart(2,"0")+"-"+String(h.getDate()).padStart(2,"0")+"T"+String(h.getHours()).padStart(2,"0")+":"+String(h.getMinutes()).padStart(2,"0");D(v),t.currentTarget.value=""}},className:"w-full bg-[#0f1420] border-2 border-[#2a3142] rounded-lg px-4 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Paste a Unix timestamp and it will automatically convert to a date/time"})]})]}),e.jsxs("div",{className:"bg-blue-950/30 border border-blue-600/30 rounded-lg p-4 flex gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-100/90",children:[e.jsxs("p",{className:"font-semibold text-blue-300 mb-1",children:["Achievement Source: ",E.source]}),e.jsx("p",{children:"Manual changes will override data from this source."})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-[#2a3142] bg-[#13172a] flex gap-3",children:[e.jsx("button",{onClick:se,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 rounded-lg transition-all",children:"Cancel"}),e.jsx("button",{onClick:nt,className:"flex-1 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white font-semibold py-3 rounded-lg transition-all shadow-lg hover:shadow-emerald-500/30",children:"Save Changes"})]})]})}),k&&Se.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-8",onClick:()=>{ee(null),te([])},children:e.jsxs("div",{className:"bg-[#1a1f3a] rounded-xl border-2 border-[#2a3142] shadow-2xl w-full max-w-2xl",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-[#2a3142] bg-[#13172a]",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Select Achievement Source"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Choose which source to use for ",k.name]})]}),e.jsx("button",{onClick:()=>{ee(null),te([])},className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(P,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 space-y-4",children:Se.map(t=>e.jsx("button",{onClick:()=>at(t.name),className:"w-full bg-[#0f1420] hover:bg-[#13172a] border-2 border-[#2a3142] hover:border-blue-500 rounded-lg p-5 transition-all text-left group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white text-lg group-hover:text-blue-400 transition-colors",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-amber-400"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-semibold text-emerald-400",children:t.unlocked_count}),e.jsx("span",{className:"text-gray-500",children:" / "}),e.jsx("span",{className:"font-semibold text-white",children:t.total_count}),e.jsx("span",{className:"text-gray-500 ml-1",children:"achievements"})]})]}),t.unlocked_count>0&&e.jsxs("div",{className:"flex items-center gap-1 bg-emerald-500/20 border border-emerald-500/30 rounded px-2 py-0.5",children:[e.jsx(z,{className:"w-3 h-3 text-emerald-400"}),e.jsxs("span",{className:"text-xs text-emerald-300 font-medium",children:[Math.round(t.unlocked_count/t.total_count*100),"% Complete"]})]})]})]}),e.jsx("div",{className:"text-blue-400 group-hover:translate-x-1 transition-transform",children:"â†’"})]})},t.name))}),e.jsx("div",{className:"p-6 border-t border-[#2a3142] bg-[#0f1420] rounded-b-xl",children:e.jsxs("div",{className:"flex gap-3 text-sm text-gray-400",children:[e.jsx(W,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),e.jsx("p",{children:"Select the source with the most complete achievement data. You can manually add missing achievements later."})]})})]})}),e.jsx(gt,{})]})}mt.createRoot(document.getElementById("root")).render(e.jsx(xt.StrictMode,{children:e.jsx(Nt,{})}));
